<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sadece Senin ƒ∞√ßin</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@1,600&display=swap');

        :root {
            --bg: #000000;
            --accent: #ff3b30;
            --gold: #ffcc00;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            width: 100%; height: 100%; 
            background: var(--bg); color: #fff;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        /* Dinamik Arka Plan */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            z-index: -1;
        }

        /* --- SAHNELER --- */
        .scene {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: 30px;
            opacity: 0; visibility: hidden;
            transition: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(0.95);
        }
        .scene.active { opacity: 1; visibility: visible; transform: scale(1); }

        /* --- MODERN TIMER --- */
        #timer { 
            font-size: 5rem; font-weight: 300; letter-spacing: -3px; 
            margin: 20px 0; color: #fff;
        }
        .wait-text { font-size: 0.9rem; letter-spacing: 5px; opacity: 0.5; text-transform: uppercase; }

        /* --- GLASS CARD (MEKTUP & WRAPPED) --- */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            width: 100%; max-width: 350px;
        }

        /* --- MEKTUP TASARIMI --- */
        .envelope-container { 
            position: relative; width: 100%; max-width: 280px; height: 180px; 
            background: #222; border-radius: 15px; cursor: pointer; transition: 0.5s;
        }
        .letter-paper {
            position: absolute; width: 90%; height: 140px; background: #fff;
            left: 5%; bottom: 10px; border-radius: 10px; color: #111;
            display: flex; align-items: center; justify-content: center;
            padding: 20px; font-family: 'Playfair Display', serif; font-size: 1.1rem;
            transition: 0.8s; z-index: 1; transform: translateY(0);
        }
        .open .letter-paper { transform: translateY(-100px); z-index: 10; }

        /* --- WRAPPED KARTLARI --- */
        .wrapped-card {
            background: #fff; color: #000;
            width: 100%; max-width: 320px; padding: 40px; border-radius: 30px;
            position: absolute; opacity: 0; transform: translateY(30px);
            transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .active-card { opacity: 1; transform: translateY(0); }

        /* --- BUTONLAR --- */
        .btn {
            padding: 16px 32px; border-radius: 50px; border: none;
            font-size: 1rem; font-weight: 600; cursor: pointer;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        #btn-yes { background: #fff; color: #000; }
        #btn-yes:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,255,255,0.4); }
        #btn-no { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #fff; position: absolute; }

        /* --- ADMIN PANEL --- */
        #admin-panel {
            position: fixed; top: 0; width: 100%; background: rgba(0,0,0,0.9);
            padding: 12px; z-index: 9999; display: none; text-align: center;
            border-bottom: 1px solid #333; font-size: 11px;
        }

        /* Kar Efekti */
        .snow { position: absolute; background: #fff; border-radius: 50%; pointer-events: none; opacity: 0.6; }

        h1, h2 { font-weight: 600; margin-bottom: 15px; }
        span.highlight { color: var(--gold); }
    </style>
</head>
<body>

    <div id="bg-canvas"></div>

    <div id="admin-panel">
        <span style="color:var(--gold)">KONTROL:</span> <span id="status-log">...</span> | 
        <button style="background:none; color:white; border:1px solid #444; padding:2px 8px; cursor:pointer;" onclick="db.ref('testMode').set(Date.now())">Kilidi A√ß</button>
    </div>

    <div id="scene-countdown" class="scene active">
        <span class="wait-text">Hik√¢yemiz ba≈ülƒ±yor</span>
        <div id="timer">00:00:00</div>
        <p style="opacity: 0.4;">Kalan zamanƒ±n her saniyesi seni √∂zlemekle ge√ßiyor.</p>
    </div>

    <div id="scene-letter" class="scene">
        <div class="envelope-container" id="envelope">
            <div class="letter-paper">Sana s√∂ylemek istediƒüim √ßok ≈üey var ama en g√ºzeli ≈üu: ƒ∞yi ki varsƒ±n... ‚ù§Ô∏è</div>
        </div>
        <p style="margin-top: 50px; font-style: italic; opacity: 0.7;">Bir mektubun var, a√ßmak i√ßin dokun.</p>
    </div>

    <div id="scene-wrapped" class="scene"></div>

    <div id="scene-proposal" class="scene">
        <div class="glass-card">
            <h2 style="font-size: 1.8rem; margin-bottom: 30px;">Yeni yƒ±la deƒüil, <span class="highlight">yƒ±llarƒ±ma</span> benimle girmek ister misin?</h2>
            <div style="position:relative; height:120px; width:100%; display:flex; justify-content:center; align-items:center;">
                <button id="btn-yes" class="btn">Evet, sonsuza dek!</button>
                <button id="btn-no" class="btn">Hayƒ±r</button>
            </div>
        </div>
    </div>

    <div id="scene-final" class="scene">
        <h1 style="font-size: 5rem; margin-bottom: 20px;">‚ù§Ô∏è</h1>
        <h1 style="font-family: 'Playfair Display', serif; font-size: 2.5rem;">Seni Seviyorum</h1>
        <p style="opacity: 0.6; margin-top: 10px; letter-spacing: 3px;">Sonsuza kadar biz.</p>
    </div>

    <script>
        // --- FIREBASE AYARLARI ---
        const firebaseConfig = {
            apiKey: "AIzaSyBwa-t-_rUBabzgDB5Ih5PCK8e2Ki3AarM",
            authDomain: "sunucu-dd652.firebaseapp.com",
            databaseURL: "https://sunucu-dd652-default-rtdb.firebaseio.com",
            projectId: "sunucu-dd652",
            storageBucket: "sunucu-dd652.firebasestorage.app",
            messagingSenderId: "487547465982",
            appId: "1:487547465982:web:f12f462aab224d01a775af"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        if(window.location.search.includes('admin=1')) document.getElementById('admin-panel').style.display = 'block';

        function logStatus(msg) {
            db.ref('userStatus').set({ action: msg, time: new Date().toLocaleTimeString() });
        }

        db.ref('userStatus').on('value', snap => {
            const data = snap.val();
            if(data) document.getElementById('status-log').innerText = `${data.action}`;
        });

        db.ref('testMode').on('value', (s) => { if(s.exists()) targetDate = new Date(); });

        // --- TIMER ---
        let targetDate = new Date(); targetDate.setHours(24,0,0,0);
        setInterval(() => {
            const diff = targetDate - new Date();
            if(diff <= 0) {
                if(document.getElementById('scene-countdown').classList.contains('active')) {
                    transition('scene-countdown', 'scene-letter');
                    logStatus("Site A√ßƒ±ldƒ±! ‚ú®");
                }
            } else {
                const h = Math.floor(diff/3600000).toString().padStart(2,'0');
                const m = Math.floor((diff%3600000)/60000).toString().padStart(2,'0');
                const s = Math.floor((diff%60000)/1000).toString().padStart(2,'0');
                document.getElementById('timer').innerText = `${h}:${m}:${s}`;
            }
        }, 1000);

        function transition(from, to) {
            const f = document.getElementById(from);
            const t = document.getElementById(to);
            f.style.transform = "scale(1.1)";
            f.classList.remove('active');
            setTimeout(() => {
                t.classList.add('active');
                if(to === 'scene-wrapped') startWrapped();
            }, 800);
        }

        // --- MEKTUP ---
        document.getElementById('envelope').onclick = function() {
            this.classList.add('open');
            logStatus("Mektubu a√ßtƒ± üíå");
            setTimeout(() => {
                document.body.onclick = () => { transition('scene-letter', 'scene-wrapped'); document.body.onclick = null; };
            }, 2500);
        };

        // --- WRAPPED ---
        function startWrapped() {
            logStatus("Hatƒ±ralarƒ± izliyor üì∏");
            const container = document.getElementById('scene-wrapped');
            const stats = [
                {l:"Seninle Ge√ßen Her G√ºn", v:"Bir Hediye"},
                {l:"Kalbimin Sahibi", v:"Sadece Sen"},
                {l:"Sana Olan A≈ükƒ±m", v:"‚àû"}
            ];
            stats.forEach((s, i) => {
                const card = document.createElement('div');
                card.className = 'wrapped-card';
                card.id = `card-${i}`;
                card.innerHTML = `<p style="text-transform:uppercase; font-size:0.8rem; letter-spacing:2px; margin-bottom:10px; opacity:0.6;">${s.l}</p><h1 style="font-size:2.5rem; font-family:'Playfair Display'">${s.v}</h1>`;
                container.appendChild(card);
            });
            let idx = 0;
            function next() {
                if(idx > 0) document.getElementById(`card-${idx-1}`).classList.remove('active-card');
                if(idx < stats.length) {
                    setTimeout(() => {
                        document.getElementById(`card-${idx}`).classList.add('active-card');
                        idx++; setTimeout(next, 3500);
                    }, 500);
                } else {
                    setTimeout(() => transition('scene-wrapped', 'scene-proposal'), 1500);
                }
            }
            next();
        }

        // --- HAYIR BUTONU ---
        const btnNo = document.getElementById('btn-no');
        const btnYes = document.getElementById('btn-yes');
        btnNo.onmouseover = btnNo.onclick = () => {
            btnNo.style.left = Math.random()*80 + '%';
            btnNo.style.top = Math.random()*80 + '%';
            logStatus("Hayƒ±r'dan ka√ßƒ±yor üèÉ‚Äç‚ôÇÔ∏è");
        };

        btnYes.onclick = () => {
            logStatus("EVET DEDƒ∞! üíç‚ù§Ô∏è");
            transition('scene-proposal', 'scene-final');
            setInterval(createSnow, 150);
        };

        function createSnow() {
            const s = document.createElement('div');
            s.className = 'snow';
            const size = Math.random()*4 + 'px';
            s.style.width = size; s.style.height = size;
            s.style.left = Math.random()*100 + 'vw';
            s.style.top = '-10px';
            s.style.opacity = Math.random();
            const fallTime = Math.random()*3 + 3;
            s.style.transition = `transform ${fallTime}s linear, opacity 1s`;
            document.body.appendChild(s);
            setTimeout(() => {
                s.style.transform = `translateY(110vh) translateX(${Math.random()*50}px)`;
            }, 10);
            setTimeout(() => s.remove(), fallTime * 1000);
        }
    </script>
</body>
</html>
