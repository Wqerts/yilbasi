<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>SÜPRİZ</title>

<style>
:root{
  --bg:#0b0f1a;
  --pink:#ff4d6d;
  --gold:#ffd166;
  --white:#f5f5f5;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}

body{
  background:var(--bg);
  color:var(--white);
  overflow:hidden;
}

.scene{
  position:fixed;
  inset:0;
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:20px;
  opacity:0;
  transition:opacity 1.5s ease;
}

.scene.active{
  display:flex;
  opacity:1;
}

h1{font-size:2.2rem;margin-bottom:20px}
p{font-size:1.1rem;line-height:1.6}

button{
  margin-top:25px;
  padding:14px 28px;
  font-size:1.1rem;
  border:none;
  border-radius:30px;
  background:var(--pink);
  color:white;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}

.letter{
  background:#11162a;
  border-radius:16px;
  padding:25px;
  max-width:340px;
  box-shadow:0 0 40px rgba(255,77,109,.25);
}

.stat{
  font-size:1.8rem;
  font-weight:700;
  margin:14px 0;
  color:var(--gold);
}
small{opacity:.7}
</style>
</head>

<body>

<canvas id="snow"></canvas>
<canvas id="confetti"></canvas>

<!-- SAHNE 0 -->
<section class="scene active" id="s-intro">
  <p>Bu hikaye <b>Bitanem</b> için yazıldı…<br><small>ve sadece ona ait.</small></p>
  <button onclick="next('s-intro','s-count')">Devam et</button>
</section>

<!-- SAHNE 1 -->
<section class="scene" id="s-count">
  <h1>Yeni Yıl’a Kalan Süre</h1>
  <div id="timer" style="font-size:2.5rem;margin-top:20px">00:00:00</div>
</section>

<!-- SAHNE 2 -->
<section class="scene" id="s-letter">
  <div class="letter" onclick="letterStep()">
    <p id="letterText">
      Bir anda girdin hayatıma…<br><br>
      Ve hiç gitmeni istemiyorummm<br><br>
      <small>(Devamı için dokun)</small>
    </p>
  </div>
</section>

<!-- SAHNE 3 -->
<section class="scene" id="s-wrapped">
  <h1>2025 Sen & Ben</h1>
  <div class="stat" id="days"></div>
  <div class="stat">%0 Aklımdan Çıkmadığın An</div>
  <div class="stat">0 Gün Konuşmadan</div>
  <button onclick="next('s-wrapped','s-ask')">Devam</button>
</section>

<!-- SAHNE 4 -->
<section class="scene" id="s-ask">
  <h1>Benimle çıkar mısın? (NORMALDE YÜZ YÜZE EDİCEKTİM AMAA TELAFİSİ GELİCEK)</h1>
  <button onclick="yes()">EVET</button>
  <button id="noBtn">Hayır</button>
</section>

<script>
/* SAHNE */
function next(a,b){
  document.getElementById(a).classList.remove('active');
  setTimeout(()=>{
    document.getElementById(b).classList.add('active');
  },1500);
}

/* COUNTDOWN */
let done=false;
const target=new Date(new Date().getFullYear()+1,0,1);
setInterval(()=>{
  if(done) return;
  const d=target-new Date();
  if(d<=0){
    done=true;
    confetti();
    next('s-count','s-letter');
  }else{
    const h=String(Math.floor(d/36e5)).padStart(2,'0');
    const m=String(Math.floor(d%36e5/6e4)).padStart(2,'0');
    const s=String(Math.floor(d%6e4/1000)).padStart(2,'0');
    timer.textContent=`${h}:${m}:${s}`;
  }
},1000);

/* MEKTUP */
let step=0;
function letterStep(){
  step++;
  if(step===1){
    letterText.innerHTML=
    "7 Kasım’da başladı her şey…<br><br>Ve ben o günden beri seni biraz daha seviyorum.";
  }
  if(step===2){
    next('s-letter','s-wrapped');
    const start=new Date(2025,10,7);
    days.textContent=`${Math.floor((Date.now()-start)/86400000)} gündür konuşuyoruz`;
  }
}

/* HAYIR KAÇIŞ */
const no=document.getElementById('noBtn');
no.onmouseenter=no.ontouchstart=()=>{
  const x=innerWidth-no.offsetWidth-10;
  const y=innerHeight-no.offsetHeight-10;
  no.style.position='absolute';
  no.style.left=Math.random()*x+'px';
  no.style.top=Math.random()*y+'px';
};

/* EVET */
function yes(){
  confetti();
  alert("SENİ ÇOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOKKKKKKKKKK SEVİYORUMMM BALIMMM BİTANEMMM HERŞEYİMMM İYİKİ VARSINNNN ");
}

/* CONFETTI */
function confetti(){
  const c=document.getElementById('confetti'),x=c.getContext('2d');
  c.width=innerWidth;c.height=innerHeight;
  let p=[...Array(120)].map(()=>({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*6}));
  let t=0;
  (function f(){
    x.clearRect(0,0,c.width,c.height);
    p.forEach(i=>{x.fillStyle=`hsl(${Math.random()*360},80%,60%)`;x.beginPath();x.arc(i.x,i.y+=3,i.r,0,7);x.fill()});
    if(t++<80) requestAnimationFrame(f);
  })();
}
</script>
</body>
</html>
